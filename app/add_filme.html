<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- ===== METADADOS E CONFIGURAÃ‡Ã•ES ===== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ Cadastrar Filme - Sistema de Cinema</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="fade-in">
<!-- ===== CONTAINER PRINCIPAL ===== -->
<div class="container">

    <!-- ===== CABEÃ‡ALHO DE NAVEGAÃ‡ÃƒO ===== -->
    <div class="navigation-buttons">
        <!-- TÃ­tulo da PÃ¡gina -->
        <h2 class="page-title" data-page="add-filme">Cadastrar Filmes</h2>

        <!-- BotÃµes de NavegaÃ§Ã£o (Direita) -->
        <div class="nav-buttons-right">
            <button id="backToAdminBtn" class="nav-btn back-btn">â¬…ï¸ Voltar</button>
            <button id="logoutBtn" class="nav-btn logout">Sair do Sistema</button>
        </div>
    </div>

    <!-- ===== FORMULÃRIO DE FILME ===== -->
    <form id="formFilmes">

        <!-- ===== SEÃ‡ÃƒO: INFORMAÃ‡Ã•ES BÃSICAS ===== -->
        <label for="tituloFilme">ğŸ­ TÃ­tulo do Filme</label>
        <input type="text" id="tituloFilme" placeholder="Digite o tÃ­tulo completo do filme" required>

        <!-- ===== SEÃ‡ÃƒO: GÃŠNEROS ===== -->
        <label>ğŸ·ï¸ GÃªneros do Filme</label>
        <div class="genero-container" id="generoContainer">
            <!-- ===== ÃREA DINÃ‚MICA ===== -->
            <!-- Os botÃµes de gÃªnero serÃ£o criados via JavaScript -->
        </div>
        <input type="hidden" id="generoFilme" name="generoFilme" required>

        <!-- ===== SEÃ‡ÃƒO: INFORMAÃ‡Ã•ES TÃ‰CNICAS ===== -->
        <label for="duracaoFilme">â±ï¸ DuraÃ§Ã£o (minutos)</label>
        <input type="number" id="duracaoFilme" placeholder="Digite a duraÃ§Ã£o em minutos" min="1" required>

        <label for="classificacaoIndicativaFilme">ğŸ“Š ClassificaÃ§Ã£o Indicativa</label>
        <select id="classificacaoIndicativaFilme" required>
            <option value="L">L - Livre para todos os pÃºblicos</option>
            <option value="10">10 - NÃ£o recomendado para menores de 10 anos</option>
            <option value="12">12 - NÃ£o recomendado para menores de 12 anos</option>
            <option value="14">14 - NÃ£o recomendado para menores de 14 anos</option>
            <option value="16">16 - NÃ£o recomendado para menores de 16 anos</option>
            <option value="18">18 - NÃ£o recomendado para menores de 18 anos</option>
        </select>

        <!-- ===== SEÃ‡ÃƒO: DESCRIÃ‡ÃƒO ===== -->
        <label for="sinopseFilme">ğŸ“ Sinopse</label>
        <textarea id="sinopseFilme"
                  placeholder="Descreva a sinopse do filme (mÃ¡ximo 500 caracteres)"
                  maxlength="500" required></textarea>

        <!-- ===== SEÃ‡ÃƒO: INFORMAÃ‡Ã•ES DE EXIBIÃ‡ÃƒO ===== -->
        <label for="dataEstreiaFilme">ğŸ“… Data de Estreia</label>
        <input type="date" id="dataEstreiaFilme" required>

        <label for="cartazFilme">ğŸ–¼ï¸ URL do Cartaz</label>
        <input type="url" id="cartazFilme"
               placeholder="Cole a URL da imagem do cartaz (deixe em branco para imagem padrÃ£o)"
               pattern="https://.*">
        <small style="color: #888; font-size: 12px; display: block; margin-top: 5px;">
            ğŸ’¡ Dica: Deixe em branco para usar imagem padrÃ£o ou use uma URL comeÃ§ando com "https://"
        </small>

        <!-- Preview da imagem -->
        <div id="imagePreview" style="display: none; margin-top: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
            <p style="margin: 0 0 8px 0; font-size: 14px;">Preview do cartaz:</p>
            <img id="previewImage" src="" alt="Preview do cartaz" style="max-width: 200px; max-height: 300px; display: block;">
        </div>

        <label for="statusFilme">ğŸ“ˆ Status de ExibiÃ§Ã£o</label>
        <select id="statusFilme" required>
            <option value="Em Cartaz">ğŸ¬ Em Cartaz - Atualmente em exibiÃ§Ã£o</option>
            <option value="Em Breve">â³ Em Breve - Em breve nos cinemas</option>
        </select>

        <!-- ===== BOTÃ•ES DE AÃ‡ÃƒO DO FORMULÃRIO ===== -->
        <div class="form-buttons">
            <button type="submit" id="submitBtn">âœ… Salvar Filme</button>
        </div>
    </form>
</div>

<!-- ===== SCRIPTS DO SISTEMA ===== -->
<script src="script.js"></script>

<!-- Script para preview de imagem -->
<script>
    // Preview da imagem do cartaz
    document.getElementById('cartazFilme').addEventListener('input', function() {
        const url = this.value;
        const preview = document.getElementById('imagePreview');
        const previewImage = document.getElementById('previewImage');

        if (url && url.startsWith('https://')) {
            previewImage.src = url;
            preview.style.display = 'block';

            // Verificar se a imagem carrega corretamente
            previewImage.onerror = function() {
                preview.innerHTML = '<p style="color: red; margin: 0;">âŒ Erro ao carregar imagem. Verifique a URL.</p>';
            };

            previewImage.onload = function() {
                preview.innerHTML = '<p style="margin: 0 0 8px 0; font-size: 14px;">âœ… Preview do cartaz:</p>';
                preview.appendChild(previewImage);
            };
        } else {
            preview.style.display = 'none';
        }
    });

    // ValidaÃ§Ã£o do formulÃ¡rio para URLs de imagem
    document.getElementById('formFilmes').addEventListener('submit', function(e) {
        const cartazUrl = document.getElementById('cartazFilme').value;

        // Se a URL foi fornecida, validar que comeÃ§a com https://
        if (cartazUrl && !cartazUrl.startsWith('https://')) {
            e.preventDefault();
            alert('âš ï¸ A URL da imagem deve comeÃ§ar com "https://" para seguranÃ§a.');
            return;
        }

        // Se nÃ£o hÃ¡ URL, o sistema usarÃ¡ imagem padrÃ£o automaticamente
        console.log('URL do cartaz:', cartazUrl || 'Usando imagem padrÃ£o');
    });
</script>
</body>
</html>